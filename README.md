# BYBARCODE - менеджер списков покупок

* Определяет продукт по числовому предствалению штрихкода
* Позволяет добавлять покупки в списки

## Зависимости

* golang
* docker
* postgresql
* makefile

## Развертка для локальной разработки

Склонировать репозиторий:

```shell
git clone git@github.com:1g0rbm/bybarcode.git
```

Добавить переменные окружения:

```shell
cp .env.example .env
```

Внутри `.env` необходимо добавить свой токен для телеграм бота в переменную TELEGRAM_BOT_TOKEN

Запустить базу данных в докер-контейнере:

```shell
make db-up
```

Накатить миграции:

```shell
make migrations-up
```

Запустить бот:

```shell
make run-bot
```

Запустить api:

```shell
make run-api
```

## Пояснения :)
Для авторизации в апи необходимо перейти в бот и вызвать команду `/open`.
Бот откроет сессию (создаст запись в таблице session) и отправит ссылку на открытие
веб приложения внутри бота. Сейчас приложение просто отбражает токен для авторизации в api :)
В будущем это будет интерфейс бота.
  
Примеры запросов ко всем эндпоинтам апи описаны в `./http/api.http`

Так же написал простую cli-утилиту для копирования базы штрихкодов из файла 
`./data/products_data_all.csv` в базу данных.
Утилита находится в файле `./cmd/cli/main.go`
